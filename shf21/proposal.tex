\documentclass[11pt]{article}
\usepackage{times}

% Packages {{{
\usepackage{dsfont}
\usepackage{tikz}
\usetikzlibrary{calc}
\usetikzlibrary{graphs}
\usetikzlibrary{cd}
\usetikzlibrary{patterns}
\usetikzlibrary{backgrounds}
\usetikzlibrary{shapes}
\usepackage{bussproofs}
\usepackage{stmaryrd}
\usepackage{bbm}
\usepackage{soul}
\usepackage{colortbl}
\usepackage{booktabs}
% }}}

\usepackage{ifthen}
\usepackage{latexsym}
\usepackage{url}

\usepackage{wrapfig}

%\usepackage[utf8]{inputenc} %for utf8 input
\usepackage{amsthm}
\usepackage{amssymb} %for shift symbol
\usepackage{amsmath}
\usepackage{listings, multicol} %for code
\usepackage{microtype} %better micro typing
\usepackage{comment}
\usepackage{paralist}
\usepackage{enumitem}
\usepackage{mathpartir}
\usepackage{xspace}
\usepackage{tcolorbox}
\usepackage{tabularx}
\usepackage{mathtools}
\usepackage{relsize}
\usepackage[font=small,labelfont=bf]{caption}\usepackage[normalem]{ulem}
\usepackage{cancel}
\usepackage{caption}
\usepackage{lipsum}
\usepackage{xcolor}

\newcommand{\DeepSpec}{\texttt{DeepSEA}\xspace}
\newtheorem{theorem}{Theorem}
\newtheorem{lemma}{Lemma}
\newtheorem{definition}{Definition}

% Hyphenation patterns
\hyphenation{Comp-Cert}
\hyphenation{Comp-CertO}

% Size of text in figures
\newcommand{\figsize}{\small}


% Other things
\input{macros}


\newcommand{\sysname}{\textsc{Advert}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\voffset             0in    %  top vertical offset
\hoffset             0in    %  left horizontal offset
\oddsidemargin       0pt    %  Left margin on odd-numbered pages.
\evensidemargin      0pt    %  Left margin on even-numbered pages.
\topmargin           0pt    %  Nominal distance from top of page to top of
\headheight          0pt    %  Height of box containing running head.
\headsep             0pt    %  Space between running head and text.
\textwidth         6.5in    %  Width of text on page
\textheight          9in    %  Height of text on page
%\setlength{\parskip}{.035in}
\renewcommand{\floatpagefraction}{.9}
\renewcommand{\textfraction}{0.1}
%\renewcommand{\baselinestretch}{1.03}

\let\cmttdfl\ttdefault          %what for?
\let\cmsfdfl\sfdefault          %what for?

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{document}

\setcounter{page}{1}
\pagenumbering{roman}

%\appendix
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\section{Cover Page} 

%\begin{comment}
\vspace*{1in} 
\centerline{
\begin{tabular}{c}
  {\Large SHF: Medium: End-to-End and Compositional Verified Secure Compilation}
\\[10ex] 
\large Zhong Shao (PI) \\[.5ex]
\large Jeremie Koenig (co-PI) \\[.5ex]
\large Department of Computer Science \\[.1ex] 
\large Yale University \\[.1ex]
\large 51 Prospect Street \\[.1ex]
\large New Haven, CT 06520-8285, USA \\[.5ex]
\large Phone: 203-432-6828 \\[.1ex]
  \large Email: \{zhong.shao, jeremie.koenig\}@yale.edu \\[5ex]
%%
  \large {\em{} A proposal for CISE CCF Core Program on Software and Hardware Foundations (SHF)}\\
\large {\em{} NSF program solicitation 21-616}
\end{tabular}
}
\vspace*{1in} 
\newpage
%\end{comment}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\section*{Project Summary}

\thispagestyle{empty}
\input {summary}
\newpage


\pagenumbering{arabic}
\setcounter{page}{1}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\section{Project Description}

\section{Introduction}
\label{sec:intro}

In the last 50 years, the C programming language and its associated
toolchain (e.g., compiler, assembler, linker, loader, memory model,
and application binary interface or ABI) have served as the primary
buiding blocks in the development of today's mainstream system
software stack. The formally verified C compiler CompCert is a recent
breakthrough that holds the promise to become the bedrock of future
{\em certified} heterogeneous system stack.  Indeed, during the last
decade, researchers have been refining the CompCert language semantics
and correctness theorem, and used them as components in various
software verification efforts. Artifacts such as OS kernels and
hypervisors, processor designs, file systems, and network protocols
have been successfuly verified. The significance of CompCert rests not
only on its verified compiler but also on the full formalization of
the ANSI C memory model and ABIs as well as the operational semantics
for all of its source, intermediate, target languages.

Unfortunately, the CompCert ecosystem today still suffers from the
following major shortcomings. First, it does not support compositional
compilation and linking of heterogeneous C and assembly components.
Second, it uses a restricted memory model that has a rigid name space
and is incompatible with multithreaded or multicore programs.  Third,
it is not end-to-end in that CompCert can only produce assembly code
but not actually binary machine code; there are still no certified
linker and loader that can work directly with ELF (Executable and
Linkable Format) binaries.  Fourth, it does not support secure
compilation; source program that is provably information-flow secure
may be compiled into target code that contains information leaks.

In this effort, the PIs propose to
develop a novel verified compilation toolchain that would address
all of the above shortcomings. More specifically,
\begin{itemize}
%%%%%%%%%%%%%%%
\item by using game semantics techniques and richer language interfaces,
they propose to develop a novel {\bf compositional verified compiler} that
can establish a truly compositional compiler correctness theorem for
open heterogeneous components;
%by relating the behaviors of source and target components directly;
%%%%%%%%%%%%%%%
\item they propose to develop a novel {\bf nominal memory model}---an
enhancement to CompCert's block-based memory model with nominal
techniques---to remove the global constraints for managing memory
blocks, and enable flexible memory structures for open and concurrent
programs;
%%%%%%%%%%%%%%%
\item basing upon their prior work on CompCertELF, they will develop an
{\bf end-to-end and compositional verified
compiler} that can compile C components all the way into ELF
object files; they will also build {\em verified compositional linker
and loader} that can work directly with ELF binaries;
%%%%%%%%%%%%%%%
\item they will develop a general
framework for specification, abstraction, and refinement in
compositional semantics, and apply this framework to connect
certified abstraction layer with verified compiler and support
{\bf verified security-preserving compilation};
%%%%%%%%%%%%%%%
\item they will evaluate the effectiveness of the new verified compiler
toolchain in two case studies: one is to use it to build more sophisticated
certified concurrent OS kernels and hypervisors; another is to
use it as a compiler backend for the DeepSEA certified programming tool.
\end{itemize}


We plan to divide \sysname{} into four major components
(Figure~\ref{fig:advert}) and implement each component in
Coq~\cite{coq}: 1) the ADO specification, 2) a multi-ADO reasoning
framework, 3) a network-based specification, and 4) a code-level
verification framework.  The ADO specification sits at the center of
\sysname{} to model individual distributed systems using a simple
atomic interface. The multi-ADO reasoning framework allows composite
systems to be built from ADOs and reasoned about modularly. \sysname{}
fills in the missing details from below with the network-based
specification, and provides a clear path between implementation and
ADO by proving a refinement relation. This specification will be
parameterized such that it can model most protocols with similar
network patterns. Along the way we will solve the challenges that stem
from mapping arbitrarily delayed future events in the network-level
specification to an atomic function call in the ADO model. Verifying
that different systems refine the ADO model will be made simple and
convenient through the network-based specification because the
properties captured by the common network pattern could allow for the
reuse of proofs. Finally, the code level verification framework will
use the certified concurrent abstraction layer
(CCAL)~\cite{concurrency} approach (the PI's prior work).  \sysname{}
will take care of each step to connect the code-level implementation
of a system up to multiple distributed system reasoning.

Our proposed research consists of the following four components:
\begin{itemize}%[leftmargin=*]
\item We will identify and propose an atomic distributed object model
  that preserves the key characteristics of distributed systems, but
  hides the implementation details.
\item We will explore different distributed protocols to create
  parameterized network-based specifications that connect individual
  system implementations to the atomic distributed object model
  through a refinement relation. Each network-based specification will
  reuse the refinement proofs and act as a template that connects a
  similar class of individual systems to the atomic distributed object
  model.
\item We will conduct studies of composite distributed applications to
  illustrate how \sysname{} and atomic distributed object model enable
  simple reasoning about multiple distributed system interactions. We
  will explore various patterns of system compositions for broad
  impact.
\item To demonstrate the power and real-world applicability of
  \sysname{}, we will carry out concrete instantiations multiple
  distributed protocols, including multi-Paxos, and Raft, and extend
  the instantiations to a large-scale distributed shared memory
  system.
\end{itemize}

\section{Compostional Verified Compilation via CompCertO}

\section{Verified Compilation with a Nominal Memory Model}

\section{Verified Compilation into ELF Object Files}

Stack-Aware Assembler via CompCertELF

\section{End-to-End Verified Secure Compilation}

CompCertOX + Full Abstraction + Robustly Secure Compilation
    
\section{Evaluation and Integration}

Talk more about supporting CCAL, CertiKOS, and DeepSEA

PIs should include a plan to evaluate the approaches developed as part
of the Project Description. Appropriate methods will depend on the
research area, topic, size and scope of the proposed project. Examples
include, but are not limited to, peer review of developed theories and
proofs, controlled experiments on appropriate
simulators/emulators/testbeds, user studies, or prototype
deployments. The plan should be appropriate for the size and scope of
the project.


\section{Broader Impact}

Our proposed research will contribute greatly to build a safe and
bug-free distributed software ecosystem. Especially, the parameterized
verification framework and atomic-distributed-object-based composite
reasoning of distributed systems capture the core properties of
distributed systems. Because most seemingly different distributed
systems are developed and optimized while preserving these core
properties, our verification approach will be able to host a wide
range of distributed systems and tolerate frequent system updates to
easily verify the safety properties. In addition, our verification
framework will guarantee the safety of large-scale distributed systems
that were considered very challenging. We expect that our research
will considerably lighten the burden of distributed system testing and
debugging by making distributed system verification greatly
approachable and applicable.

Furthermore, our research can be easily extended to different domains,
such as cyber physical systems and internet of things, where hundreds
of devices realize a form of a distributed system. For example,
mission critical health monitoring wireless sensor nodes and
coordination of self-driving cars and avionics would be able to
directly benefit from our research. As computing devices are becoming
more and more common, our research will be able to verify the
correctness of their interactions and have a greater impact.

We plan to develop innovative distributed system software and formal
verification curriculum at both the undergraduate and graduate
level. PI Shao recently started to teach a course on language-based
security at Yale and the term projects are designed based on initial
findings of our proposal.  Extending the term project, co-PI Shin is
planning to develop a distributed system verification course, where
students can gain hands-on experience on both system design and
verification. We plan to extend the courses to undergraduate and
Master's research program where students can participate in the
proposed research. We will make our course materials freely available
and encourage our colleagues to use them at other universities.

We are planning to further use our research materials to foster
diversity and inclusion. Co-PI Soul\'e has been specially focusing
on supporting Latin American and Hispanic students for few years with
scholarship programs, student visit programs, and diversity seminars. 
The PIs plan to continue these efforts jointly and to recruit 
underrepresented students to get involved in our research.

Several composite distributed system examples that we plan to model
and verify are motivated by experiences in the commercial sector, 
and therefore has a clear promise for industrial impact. 
For example, co-PI Soul\'{e} has worked closely with Western Digital 
on a project that uses network hardware to build a new breed of 
distributed shared memory system. Successful modeling and
verification of the system can directly influence the safety and 
correctness of the production prototype. 

The design, implementation, and validation of a software artifact 
is one of our great contributions to our proposal. 
We plan to release the software developed in this project under 
a flexible, open-source license.


\section{Results from Prior NSF Support}
\label{ssec:prior}

\paragraph{Expedition in Computing: The Science of Deep Specification (PI: Zhong Shao)} 
NSF CCF-1521531, \$2,046,445, with Andrew Appel and Lennart Beringer
(Princeton), Benjamin Pierce and Stephanie Weirich and Steven
Zdancewic (U. Pennsylvania), and Adam Chlipala (MIT), 2015-2020.  {\em
  Intellectual Merit:} The Yale Component of this expedition project
aims to develop a concurrent certified OS kernel (CertiKOS) and
connect it with the verified RISC-V hardware (developed at MIT) and
the web server (developed at UPenn, and verified at Princeton). The
key emphasis is to work out the detailed specification for the machine
interfaces (e.g., for RISC-V) and the system call interface (e.g., for
CertiKOS) so that software and hardware components verified by
multiple DeepSpec groups can indeed be linked togher. During the first
two years, The Yale team has successfully developed a clean-slate
CertiKOS hypervisor OS kernel that runs successfully on both Intel and
AMD multicore platforms with hardware virtualization and can boot
Ubuntu or Debian Linux as guest~\cite{certikos16}.  We have also
developed a new compositional approach for formally specifying and
verifying sequential and concurrent OS
kernels~\cite{chen16,costanzo16,certikos16}.  {\em Broader Impacts:}
This award has partly supported multiple postdocs and students in the
past two years. PhD student Ronghui Gu will join Columbia CS as a new
tenure track Assistant Professor.  The team has organized multiple
outreach workshops in 2016-2017, and also a two-week DeepSpec summer
school in 2017 with more than 150 attendees from all over the
world. PI Shao has incorporated the layered CertiKOS kernel into an
innovative undergraduate OS class.  {\em Representative Publications}:
two PLDI papers~\cite{chen16,costanzo16} and one OSDI
paper~\cite{certikos16}.

\paragraph{Co-PI Jeremie Koenig}
There is no prior NSF support for which Koenig is a PI.

\newpage
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\section{References Cited}
{\bibliographystyle{abbrv}
\makeatletter
\renewcommand\small{%
   \@setfontsize\small{10.46}{12.77}
   \abovedisplayskip 10\p@ \@plus2\p@ \@minus5\p@
   \abovedisplayshortskip \z@ \@plus3\p@
   \belowdisplayshortskip 6\p@ \@plus3\p@ \@minus3\p@
   \def\@listi{\leftmargin\leftmargini
               \topsep 6\p@ \@plus2\p@ \@minus2\p@
               \parsep 3\p@ \@plus2\p@ \@minus\p@
               \itemsep \parsep}%
   \belowdisplayskip \abovedisplayskip
}
\makeatother
 \small\bibliography{references,shao}
} \newpage
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\end{document}

