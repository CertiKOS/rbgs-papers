\section{Compositional Verified Compilation into ELF Object Files}

Together with his students, PI Shao has recently developed
CompCertELF~\cite{compcertelf20}, the first extension to CompCert that
supports verified compilation from C programs all the way to a
standard binary file format, i.e., the ELF object format.  However,
CompCertELF only supports verified separate
compilation~\cite{sepcompcert} which cannot handle linking of
heterogeneous components.  For this proposal, we will integrate the
technologies in CompCertELF into Nominal CompCertO to build an {\em
  end-to-end and compositional verified compiler} that can compile C
components all the way into ELF object files.

\paragraph*{Task 3a: Stack-Aware Norminal CompCertO.}
To support concrete memory layout required by the binary machine code,
we will first extend Nominal CompCertO to support compilation with a
single, continuous, and finite stack by incorporating the key ideas in
Stack-Aware CompCert~\cite{wang2019,compcertelf20}.  Stack-Aware
CompCert explicitly manages the call stack by adding a data type
called \emph{abstract stack} to memory states. The abstract stack
records the history of memory consumption incurred by stack allocation
and maintains fine-grained \emph{stack permissions}. By exploiting
that information, Stack-Aware CompCert achieves contextual compilation
of single-threaded C programs into an assembly language that is aware
of a single and finite stack.  In our structured nominal memory model,
the abstract stack can be readily absorbed into the support. We can
drop stack permissions from the abstract stack in Stack-Aware CompCert
because CompCertO already separately enforces them as part of its
reasoning framework (e.g., simulation conventions).

Furthermore, by enriching supports with multiple
abstract stacks following the idea of Stack-Aware
CompCert~\cite{wang2019}, we are able to compile multi-threaded
programs onto multi-stack machine models. These ideas will form a complete
solution to thread-safe contextual compilation needed to support
CCAL~\cite{ccal18}.


\paragraph*{Task 3b: Verified Compilation into Relocatable ELF Files}
CompCertELF is built on top of Stack-Aware CompCert. In essence, it
modifies and extends Stack-Aware CompCert's compilation chain with a
\emph{verified assembler} that transforms the realistic assembly
programs output by Stack-Aware CompCert to sequences of bytes that
represent relocatable ELF files.
This assembler consists of several passes that successively merge code
and data into atomic blocks (known as sections), generate information for
relocation and linking (such as symbol tables and relocation tables),
encode the assembly instructions and the global data into their binary forms,
and finally embed them into the ELF format with meta-data (such as section
headers and ELF headers).

\paragraph*{Task 3c: Certified Compositional ELF Linker and Loader}
blah blah blah.

   
   
